/*!
 * jquery-confirm v1.7.3 (http://craftpip.github.io/jquery-confirm/)
 * Author: Boniface Pereira
 * Website: www.craftpip.com
 * Contact: hey@craftpip.com
 *
 * Copyright 2013-2015 jquery-confirm
 * Licensed under MIT (https://github.com/craftpip/jquery-confirm/blob/master/LICENSE)
 * 
 */
if(typeof jQuery==="undefined"){throw new Error("jquery-confirm requires jQuery")}var jconfirm,Jconfirm;(function(b){b.confirm=function(c){return jconfirm(c)};b.alert=function(c){c.cancelButton=false;return jconfirm(c)};b.dialog=function(c){c.cancelButton=false;c.confirmButton=false;return jconfirm(c)};jconfirm=function(c){if(jconfirm.defaults){b.extend(jconfirm.pluginDefaults,jconfirm.defaults)}var c=b.extend({},jconfirm.pluginDefaults,c);return new Jconfirm(c)};Jconfirm=function(c){b.extend(this,c);this._init()};Jconfirm.prototype={_init:function(){var c=this;this._rand=Math.round(Math.random()*99999);this._buildHTML();this._bindEvents();setTimeout(function(){c.open()},0)},animations:["anim-scale","anim-top","anim-bottom","anim-left","anim-right","anim-zoom","anim-opacity","anim-none","anim-rotate","anim-rotatex","anim-rotatey","anim-scalex","anim-scaley"],_buildHTML:function(){var c=this;this.animation="anim-"+this.animation.toLowerCase();if(this.animation==="none"){this.animationSpeed=0}this.$el=b(this.template).appendTo(this.container).addClass(this.theme);this.$el.find(".jconfirm-box-container").addClass(this.columnClass);this.CSS={"-webkit-transition-duration":this.animationSpeed/1000+"s","transition-duration":this.animationSpeed/1000+"s","-webkjit-transition-timing-function":"cubic-bezier(0.27, 1.12, 0.32, "+this.animationBounce+")","transition-timing-function":"cubic-bezier(0.27, 1.12, 0.32, "+this.animationBounce+")",};this.$el.find(".jconfirm-bg").css(this.CSS);this.$b=this.$el.find(".jconfirm-box").css(this.CSS).addClass(this.animation);this.setTitle();this.contentDiv=this.$el.find("div.content");this.$btnc=this.$el.find(".buttons");if(this.confirmButton&&this.confirmButton.trim()!==""){this.$confirmButton=b('<button class="btn">'+this.confirmButton+"</button>").appendTo(this.$btnc).addClass(this.confirmButtonClass)}if(this.cancelButton&&this.cancelButton.trim()!==""){this.$cancelButton=b('<button class="btn">'+this.cancelButton+"</button>").appendTo(this.$btnc).addClass(this.cancelButtonClass)}if(!this.confirmButton&&!this.cancelButton){this.$btnc.remove()}if(!this.confirmButton&&!this.cancelButton&&this.closeIcon==null){this.$closeButton=this.$b.find(".closeIcon").show()}if(this.closeIcon===true){this.$closeButton=this.$b.find(".closeIcon").show()}this.setContent();if(this.autoClose){this._startCountDown()}},setTitle:function(c){this.title=(typeof c!=="undefined")?c:this.title;if(this.title){this.$el.find("div.title:first").html('<i class="'+this.icon+'"></i> '+this.title)}else{this.$el.find("div.title:first").remove()}},setContent:function(e){var f=this;this.content=(e)?e:this.content;var c=(e)?true:false;if(typeof this.content==="boolean"){if(!this.content){this.contentDiv.remove()}else{console.error("Invalid option for property content: passed TRUE")}}else{if(typeof this.content==="string"){if(this.content.substr(0,4).toLowerCase()==="url:"){this.contentDiv.html("");this.$btnc.find("button").prop("disabled",true);var d=this.content.substring(4,this.content.length);b.get(d).done(function(h){f.contentDiv.html(h)}).always(function(i,h,j){if(typeof f.contentLoaded==="function"){f.contentLoaded(i,h,j)}f.$btnc.find("button").prop("disabled",false);f.setDialogCenter()})}else{this.contentDiv.html(this.content)}}else{if(typeof this.content==="function"){this.contentDiv.html("");this.$btnc.find("button").attr("disabled","disabled");var g=this.content(this);if(typeof g!=="object"){console.error("The content function must return jquery promise.")}else{if(typeof g.always!=="function"){console.error("The object returned is not a jquery promise.")}else{g.always(function(i,h){f.$btnc.find("button").removeAttr("disabled");f.setDialogCenter()})}}}else{console.error("Invalid option for property content, passed: "+typeof this.content)}}}this.setDialogCenter(c)},_startCountDown:function(){var c=this.autoClose.split("|");if(/cancel/.test(c[0])&&this.type==="alert"){return false}else{if(/confirm|cancel/.test(c[0])){this.$cd=b('<span class="countdown">').appendTo(this["$"+c[0]+"Button"]);var d=this;d.$cd.parent().click();var e=c[1]/1000;this.interval=setInterval(function(){d.$cd.html(" ["+(e-=1)+"]");if(e===0){d.$cd.parent().trigger("click");clearInterval(d.interval)}},1000)}else{console.error("Invalid option "+c[0]+", must be confirm/cancel")}}},_bindEvents:function(){var c=this;this.$el.find(".jconfirm-scrollpane").click(function(d){if(c.backgroundDismiss){c.cancel();c.close()}else{c.$b.addClass("hilight");setTimeout(function(){c.$b.removeClass("hilight")},400)}});this.$el.find(".jconfirm-box").click(function(d){d.stopPropagation()});if(this.$confirmButton){this.$confirmButton.click(function(f){f.preventDefault();var d=c.confirm(c.$b);if(typeof d==="undefined"||d){c.close()}})}if(this.$cancelButton){this.$cancelButton.click(function(f){f.preventDefault();var d=c.cancel(c.$b);if(typeof d==="undefined"||d){c.close()}})}if(this.$closeButton){this.$closeButton.click(function(d){d.preventDefault();c.cancel();c.close()})}if(this.keyboardEnabled){setTimeout(function(){b(window).on("keyup."+this._rand,function(d){c.reactOnKey(d)})},500)}b(window).on("resize."+this._rand,function(){c.setDialogCenter(true)})},reactOnKey:function a(f){var c=b(".jconfirm");if(c.eq(c.length-1)[0]!==this.$el[0]){return false}var d=f.which;if(d===27){if(!this.backgroundDismiss){this.$el.find(".jconfirm-bg").click();return false}if(this.$cancelButton){this.$cancelButton.click()}else{this.close()}}if(d===13||d==32){if(this.$confirmButton){this.$confirmButton.click()}else{}}},setDialogCenter:function(d){var h=b(window).height();var g=this.$b.outerHeight();var c=(h-g)/2;var f=100;if(g>(h-f)){var e={"margin-top":f/2,"margin-bottom":f/2,}}else{var e={"margin-top":c,}}if(d){this.$b.animate(e,{duration:this.animationSpeed,queue:false})}else{this.$b.css(e)}},close:function(){var c=this;b(window).unbind("resize."+this._rand);if(this.keyboardEnabled){b(window).unbind("keyup."+this._rand)}c.$el.find(".jconfirm-bg").removeClass("seen");this.$b.addClass(this.animation);setTimeout(function(){c.$el.remove()},this.animationSpeed+10);jconfirm.record.closed+=1;jconfirm.record.currentlyOpen-=1;if(jconfirm.record.currentlyOpen<1){b("body").removeClass("jconfirm-noscroll")}},open:function(){var c=this;if(this.isClosed()){return false}c.$el.find(".jconfirm-bg").addClass("seen");b("body").addClass("jconfirm-noscroll");this.$b.removeClass(this.animations.join(" "));b("body :focus").trigger("blur");this.$b.find("input[autofocus]:visible:first").focus();jconfirm.record.opened+=1;jconfirm.record.currentlyOpen+=1;return true},isClosed:function(){return(this.$el.css("display")==="")?true:false}};jconfirm.pluginDefaults={template:'<div class="jconfirm"><div class="jconfirm-bg"></div><div class="jconfirm-scrollpane"><div class="container"><div class="row"><div class="jconfirm-box-container span6 offset3"><div class="jconfirm-box"><div class="closeIcon"><span class="glyphicon glyphicon-remove"></span></div><div class="title"></div><div class="content"></div><div class="buttons"></div><div class="jquery-clear"></div></div></div></div></div></div></div>',title:"Hello",content:"Are you sure to continue?",contentLoaded:function(){},icon:"",confirmButton:"Okay",cancelButton:"Cancel",confirmButtonClass:"btn-default",cancelButtonClass:"btn-con-cancel mybtn-cancel",theme:"white",animation:"scale",animationSpeed:400,animationBounce:1.5,keyboardEnabled:false,container:"body",confirm:function(){},cancel:function(){},backgroundDismiss:true,autoClose:false,closeIcon:null,columnClass:"col-md-6 col-md-offset-3",};jconfirm.record={opened:0,closed:0,currentlyOpen:0,}})(jQuery);

// 扩展属性
// canClose:false-阻止关闭, undefined/null-继续关闭
Jconfirm.prototype._close_ex=Jconfirm.prototype.close;
Jconfirm.prototype.close=function(){if(this.canClose!=false)return this._close_ex();}

// 扩展属性,
// onOpen:窗口打开前调用, 返回值:false-取消打开
// opened:窗口打开后调用
Jconfirm.prototype._open_ex=Jconfirm.prototype.open;
Jconfirm.prototype.open = function() {
	if ((this.onOpen instanceof Function)&&(false==this.onOpen())) {this.close();return;}
	var result = this._open_ex();
	(this.opened instanceof Function)&&this.opened();
	return result;
}

// 扩展属性,
// 原接口不接受 jQuery 参数, 扩展后支持传递 jQuery 参数
// Jconfirm.setContent
Jconfirm.prototype._setContent_ex=Jconfirm.prototype.setContent;
Jconfirm.prototype.setContent=function(e){
	if(e instanceof jQuery){this.contentDiv.html("").append(e);this.setDialogCenter();}
	else this._setContent_ex(e);
}

// 扩展接口
// 获取外层盒子
Jconfirm.prototype.getBox=function(){return this.$el.find(".jconfirm-box-container");}

// 扩展接口
// 设置外层盒子样式, 仅保留 .jconfirm-box-container
Jconfirm.prototype.setBoxClass=function(c){
    var $this=this;
    setTimeout(function(){
        $this.getBox().removeAttr("class").addClass("jconfirm-box-container "+(c||"")).css("margin","0 auto"),
        $this.setDialogCenter(true);
    }, 0);
    return this;
}

// 扩展接口
// 设置Dialog宽度, 并自动居中.
// 该接口会自动去掉 bootstrap 特性class[span6 offset3 col-md-6 col-md-offset-3]
Jconfirm.prototype.setBoxWidth=function(width){
    var $this=this,width=parseFloat(width||0)||"auto";
    setTimeout(function(){
        $this.setBoxClass().css("width",width),
        $this.setDialogCenter(true);
    },0);
    return this;
};

// 扩展接口
// 设置为confirm-box追加类样式
Jconfirm.prototype.addBoxClass=function(c){
    var $this=this;
    !!c&&setTimeout(function(){$this.getBox().addClass(c)},0);
    return this;
}

$.jc={
	/**
	 * 信息消息提醒
	 * @param msg 消息内容
	 * @param okFn 确认回调函数
	 * @returns jQuery
	 */
	info:function(msg,okFn){return $.alert({title:"Info",content:(msg||"The system is unusual, please try again later."),confirm:okFn});},
		
	/**
	 * 警告消息提醒
	 * @param msg 消息内容
	 * @param okFn 确认回调函数
	 */
	warning:function(msg,okFn){return $.alert({title:"Warning",content:(msg||"The system is unusual, please try again later."),confirm:okFn});},
	
	/**
	 * 错误消息提示
	 * @param msg 消息内容
	 * @param okFn 确认回调函数
	 */
	error:function(msg,okFn){return $.alert({title:"Error",content:(msg||"The system is unusual, please try again later."),confirm:okFn});},
	
	/**
	 * 简化版$.confirm
	 * @param title 标题
	 * @param msg 消息
	 * @param okFn 确认回调函数
	 */
	confirm:function(title,msg,okFn){return $.confirm({title:title||"Info",content:msg,confirm:okFn});},
	
	/**
	 * TODO 加载指定URL内容
	 * @param conf 
	 * <pre>
	 * url - {String}:请求地址,
	 * param - {JSON}:请求参数
	 * title - {String}:dialog标题,
	 * confirm - {Function}:Confirm回调函数,
	 * cancel - {Function}:Cancel回调函数
	 * </pre>
	 */
	load:function(conf){$.jc.warning("Can't support");}
};